{% extends 'layout.html' %}
{% block title %}{{ book.title }}{% endblock %}
{% block content %}
<div class="row book">
    <div class="col-3 book-img">
        <img class="img-fluid" src="{{ url_for('static', filename='images/bookcover.png') }}" alt="{{ book.title }} cover">
    </div>
    <div class="col-9 book-info">
        <h2>{{ book.title }}</h2>
        <p>by {{ book.author }}, {{ book.year }}</p>
        <p>ISBN: {{ book.isbn }}</p>
    </div>
</div>
{% if session['user_id'] %}
<label for="add-review">Add my review</label>
<form class="add-review" id="add-review" action="add_review" method="post">
    <div class="form-group">
        <label for="review-title">Title</label>
        <input class="form-control mr-sm-2" id="review-title" type="text" aria-describedby="Review title" name="review-title">
    </div>
    <div class="form-group">
        <label for="review-text">Text</label>
        <textarea class="form-control mr-sm-2" id="review-text" type="text" aria-describedby="Review text" name="review-text"></textarea>
    </div>
    <div class="form-group">
        <button class="btn btn-primary" type="submit">Add</button>
    </div>
</form>
{% endif %}
{% if reviews %}
<div class="row reviews">
    {% for review in book.reviews %}
    <div class="col-12 review-body">
        <span class="review-item review-author">{{ review.author }}</span>
        <span class="review-item review-rating">{{ review.rating }}</span>
        <p class="review-item review-text">{{ review.text }}</p>
    </div>
    {% endfor %}
</div>
    {% else %}
    <div class="col-12 empty">
        <p class="empty-message">There is no reviews for this book yet.</p>
    </div>
</div>
{% endif %}
{% endblock %}
